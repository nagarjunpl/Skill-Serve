<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Dashboard - SkillServe</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body data-page-title="customer dashboard">
    <div class="container">
        <header class="dashboard-header">
            <div class="logo">
                <h1>üîß SkillServe</h1>
            </div>
            <nav class="nav">
                <a href="customer-dashboard.html" class="nav-link active" data-translate="home">Home</a>
                <a href="#" onclick="showBookings()" class="nav-link" data-translate="my bookings">My Bookings</a>
                <a href="#" onclick="showProfile()" class="nav-link" data-translate="profile">Profile</a>
                <button onclick="refreshWorkerData()" class="btn btn-refresh" title="Refresh worker data from storage.js">üîÑ <span data-translate="refresh">Refresh Data</span></button>
                <a href="#" onclick="logout()" class="nav-link" data-translate="logout">Logout</a>
            </nav>
        </header>

        <main class="dashboard-main">
            <div id="homeSection">
                <div class="welcome-section">
                    <h2 id="welcomeMessage">Welcome, Customer!</h2>
                    <p data-translate="find local skilled workers">Find and book skilled workers in your area</p>
                </div>

                <div class="search-section">
                    <div class="search-controls">
                        <select id="workerTypeFilter">
                            <option value="">All Professions</option>
                            <option value="electrician" data-translate="electrician">Electrician</option>
                            <option value="plumber" data-translate="plumber">Plumber</option>
                            <option value="painter" data-translate="painter">Painter</option>
                            <option value="carpenter" data-translate="carpenter">Carpenter</option>
                            <option value="mechanic" data-translate="mechanic">Mechanic</option>
                            <option value="cleaner" data-translate="cleaner">Cleaner</option>
                        </select>
                        <div class="location-search-container">
                            <input type="text" id="locationSearch" placeholder="Search location..." autocomplete="off" data-translate="location">
                            <div id="locationSuggestions" class="location-suggestions"></div>
                        </div>
                        <button id="searchBtn" class="btn btn-primary" data-translate="search">Search Workers</button>
                        <button id="clearFiltersBtn" class="btn btn-secondary" data-translate="clear">Clear Filters</button>
                    </div>
                </div>

                <div id="workersSection" class="workers-section">
                    <h3>Available Workers</h3>
                    <div id="workersList" class="workers-grid">
                        <!-- Workers will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <div id="bookingsSection" class="bookings-section" style="display: none;">
                <h3 data-translate="my bookings">My Bookings</h3>
                <div id="bookingsList" class="bookings-list">
                    <!-- Bookings will be populated by JavaScript -->
                </div>
            </div>

            <div id="profileSection" class="profile-section" style="display: none;">
                <h3 data-translate="profile">My Profile</h3>
                <div class="profile-card">
                    <div id="profileDisplay">
                        <!-- Profile info will be populated by JavaScript -->
                    </div>
                    <div id="profileEdit" style="display: none;">
                        <form id="profileEditForm">
                            <div class="form-group">
                                <label for="editName" data-translate="name">Full Name</label>
                                <input type="text" id="editName" required>
                            </div>
                            <div class="form-group">
                                <label for="editEmail" data-translate="email">Email</label>
                                <input type="email" id="editEmail" required>
                            </div>
                            <div class="form-group">
                                <label for="editPhone" data-translate="phone">Phone Number</label>
                                <input type="tel" id="editPhone">
                            </div>
                            <div class="form-group">
                                <label for="editAddress" data-translate="address">Address</label>
                                <textarea id="editAddress" rows="3"></textarea>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary" data-translate="save">Save Changes</button>
                                <button type="button" class="btn btn-secondary" onclick="cancelEdit()" data-translate="cancel">Cancel</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <div id="bookingModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3 data-translate="book service">Book Service</h3>
            <form id="bookingForm">
                <div class="form-group">
                    <label for="issueDescription" data-translate="describe your issue">Describe your issue</label>
                    <textarea id="issueDescription" rows="4" required></textarea>
                </div>
                <div class="form-group">
                    <label for="preferredDate" data-translate="preferred date">Preferred Date</label>
                    <input type="date" id="preferredDate" required>
                </div>
                <div class="form-group">
                    <label for="preferredTime" data-translate="preferred time">Preferred Time</label>
                    <input type="time" id="preferredTime" required>
                </div>
                <div class="form-group">
                    <label for="contactNumber" data-translate="contact number">Contact Number</label>
                    <input type="tel" id="contactNumber" required>
                </div>
                <button type="submit" class="btn btn-primary">Submit Booking</button>
            </form>
        </div>
    </div>

    <!-- rl -->
    <div id="ratingModal" class="modal">
        <div class="modal-content">
            <span class="close-rating">&times;</span>
            <h3 data-translate="rate your experience">Rate Your Experience</h3>
            <div id="ratingWorkerInfo" class="rating-worker-info">
            
            </div>
            <form id="ratingForm">
                <div class="form-group">
                    <label>How would you rate this worker?</label>
                    <div class="star-rating">
                        <span class="star" data-rating="1">‚≠ê</span>
                        <span class="star" data-rating="2">‚≠ê</span>
                        <span class="star" data-rating="3">‚≠ê</span>
                        <span class="star" data-rating="4">‚≠ê</span>
                        <span class="star" data-rating="5">‚≠ê</span>
                    </div>
                    <input type="hidden" id="selectedRating" required>
                </div>
                <div class="form-group">
                    <label for="reviewComment">Review (Optional)</label>
                    <textarea id="reviewComment" rows="3" placeholder="Share your experience with this worker..."></textarea>
                </div>
                <button type="submit" class="btn btn-primary" data-translate="submit rating">Submit Rating</button>
            </form>
        </div>
    </div

    <!-- Cancel Booking Confirmation Modal -->
    <div id="cancelBookingModal" class="modal">
        <div class="modal-content cancel-booking-modal">
            <span class="close-cancel">&times;</span>
            <div class="cancel-warning">
                <div class="warning-icon">‚ùå</div>
                <h3>Cancel Booking</h3>
                <p>Are you sure you want to cancel this booking?</p>
                <div id="cancelBookingInfo" class="cancel-booking-info">
                    <!-- Booking info will be populated -->
                </div>
                <div class="cancel-actions">
                    <button id="confirmCancelBtn" class="btn btn-danger">Yes, Cancel Booking</button>
                    <button class="btn btn-secondary" onclick="closeCancelModal()">Keep Booking</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="deleteConfirmModal" class="modal">
        <div class="modal-content delete-modal">
            <span class="close-delete">&times;</span>
            <div class="delete-warning">
                <div class="warning-icon">‚ö†Ô∏è</div>
                <h3 data-translate="delete">Delete Account</h3>
                <p>Are you sure you want to permanently delete your account?</p>
                <div class="delete-consequences">
                    <h4>This action will:</h4>
                    <ul>
                        <li>Permanently delete your profile</li>
                        <li>Cancel all pending bookings</li>
                        <li>Remove your booking history</li>
                        <li>This action cannot be undone</li>
                    </ul>
                </div>
                <div class="delete-confirmation">
                    <p>Type <strong>"DELETE"</strong> to confirm:</p>
                    <input type="text" id="deleteConfirmText" placeholder="Type DELETE here">
                </div>
                <div class="delete-actions">
                    <button id="confirmDeleteBtn" class="btn btn-danger" disabled>Delete My Account</button>
                    <button class="btn btn-secondary" onclick="closeDeleteModal()" data-translate="cancel">Cancel</button>
                </div>
            </div>
        </div>
    </div>
